---
import arrow from "../../assets/about/arrow.svg";
---

<section class='mt-20 lg:px-6 w-full'>
  <h4 class='text-3xl text-stone-50 z-50 px-4 w-2/3 md:hidden'>
    only good well-being leads to well-working
  </h4>
  <div
    class='w-full relative bg-black lg:border border-neutral-800 overflow-hidden'
  >
    <div
      class='absolute w-full md:w-1/2 h-full top-0 left-0 pointer-events-none z-10'
    >
      <div class='relative h-full w-full'>
        <h4
          id='scroll-text'
          class='text-stone-50 text-2xl leading-tight md:text-5xl w-[85%] md:w-1/2 absolute left-6 md:left-12 top-[8%] md:top-[14%] hidden md:block'
        >
          only good well-being leads to well-working
        </h4>
      </div>
    </div>

    <div id='canvas-1' class='w-full h-[200vh] md:h-[300vh]'></div>

    <article
      class='absolute top-0 left-0 w-full h-full flex flex-col justify-between pt-[95%] md:pt-[25%] pb-[10%] md:pb-[30%] px-6 md:px-0'
    >
      <div class='flex justify-between md:px-9 w-full'>
        <div class='hidden md:block'></div>
        <p class='text-stone-200 w-full md:w-1/4 text-sm md:text-base'>
          More than our work, we are valuable as aperson. As much as you do your
          best at work, We are committed at prioritizing and improving your
          well-being.
        </p>
      </div>
      <div class='flex justify-between md:px-9 w-full'>
        <div class='hidden md:block'></div>
        <p class='text-stone-200 w-full md:w-1/4 text-sm md:text-base'>
          More than our work, we are valuable as aperson. As much as you do your
          best at work, We are committed at prioritizing and improving your
          well-being.
        </p>
      </div>
      <div class='flex justify-between md:px-9 w-full'>
        <div class='hidden md:block'></div>
        <div class='w-full md:w-1/4'>
          <p class='text-stone-200 text-sm md:text-base'>
            Braga's living systems, and playbook are designed to ensure you have
            a wholly impeccable experience here.
          </p>
          <button
            class='bg-orange-700 py-2 px-3 text-sm text-white rounded-sm flex space-x-2 mt-8 items-center'
            ><p>Grow With Us</p><img
              src={arrow.src}
              alt=''
              class='w-4 h-4'
            /></button
          >
        </div>
      </div>
    </article>
  </div>
</section>

<script>
  const scrollText = document.getElementById("scroll-text");
  const canvas = document.getElementById("canvas-1");

  if (scrollText && canvas) {
    const updateTextPosition = () => {
      const isMobile = window.innerWidth < 768;

      // Only animate on desktop
      if (!isMobile) {
        const canvasRect = canvas.getBoundingClientRect();
        const canvasHeight = canvasRect.height;
        const viewportHeight = window.innerHeight;

        // Calculate scroll progress (0 at top, 1 at bottom)
        const scrollProgress = Math.max(
          0,
          Math.min(1, -canvasRect.top / (canvasHeight - viewportHeight))
        );

        const startPosition = 14;
        const endPosition = 75;
        const currentPosition =
          startPosition + scrollProgress * (endPosition - startPosition);

        scrollText.style.top = `${currentPosition}%`;
        scrollText.style.transition = "top 0.05s ease-out";
      } else {
        // Keep text fixed at top on mobile
        scrollText.style.top = "8%";
        scrollText.style.transition = "none";
      }
    };

    window.addEventListener("scroll", updateTextPosition, { passive: true });
    window.addEventListener("resize", updateTextPosition, { passive: true });
    updateTextPosition(); // Initial call
  }
</script>
