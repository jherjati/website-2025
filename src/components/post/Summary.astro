---
import { fetchPosts } from "../../utils/api";

const { currentSlug, post } = Astro.props;
const allPosts = await fetchPosts();
const posts = allPosts.filter(p => p.slug !== currentSlug);
---

<section class="w-full px-6 grid grid-cols-4 gap-6 text-neutral-800">
    <h5 class="text-4xl">Summary</h5>
    <div class="col-span-3">
        {post.summary && (
            <article class="space-y-6" set:html={post.summary} />
        )}
    </div>
    <div></div>
    <div class="col-span-3 mt-9">
        <p class="w-full border-b border-neutral-600 mb-12 text-neutral-500">Related Articles</p>
        <div class="w-full overflow-x-scroll">
            <div class="flex space-x-5">
                {
                    posts.map(({ title, thumbnail, client }) => (
                        <div class="p-4 space-y-4 border border-neutral-400 rounded-sm min-w-72 z-10">
                            <h5 class="text-2xl text-neutral-800">{title}</h5>
                            <img src={thumbnail} class="rounded-sm w-full" />
                            <div class="flex justify-between space-x-2">
                                <p class="text-sm text-neutral-600 grow line-clamp-2">
                                    {client}
                                </p>
                                <button class="text-sm text-white bg-orange-600 rounded-sm min-w-28 px-3 py-2">
                                    Read More
                                </button>
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>
